â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  PLAN DE REFACTORISATION - SORIKAMA HUB BACKEND
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Date : 18 novembre 2024
Objectif : Code propre, structure claire, pas de duplication

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸ“ FICHIERS Ã€ SUPPRIMER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

RACINE :
â˜ src/index_fixed.ts (doublon)
â˜ .env.secrets.tmp (temporaire)
â˜ .launch-count (temporaire)
â˜ dump.rdb (Redis dump)
â˜ test-service-server.js (test)
â˜ start-clean.js (script dev)
â˜ start-dev.js (script dev)

MIDDLEWARES REDONDANTS :
â˜ dynamicProxy.middleware.ts (utilise proxy/proxyMiddleware.ts)
â˜ serviceProxy.middleware.ts (doublon)
â˜ proxyAuth.middleware.ts (logique dans proxy/)

CONTROLLERS DOUBLONS :
â˜ service-user.controller.ts (garder serviceUser.controller.ts)
â˜ proxy.controller.ts (pas utilisÃ©, logique dans middleware)

ROUTES DOUBLONS :
â˜ service-user.routes.ts (garder serviceUser.routes.ts)
â˜ admin-control.routes.ts (fusionner avec admin.routes.ts)
â˜ admin-public.routes.ts (fusionner avec admin.routes.ts)
â˜ auth-portal.routes.ts (fusionner avec auth.routes.ts)
â˜ auth-redirect.routes.ts (fusionner avec auth.routes.ts)
â˜ dashboard.routes.ts (pas utilisÃ©)
â˜ dependencies.routes.ts (pas utilisÃ©)
â˜ logs-viewer.routes.ts (pas utilisÃ©)
â˜ metrics-dashboard.routes.ts (fusionner avec monitoring.routes.ts)
â˜ performance-dashboard.routes.ts (fusionner avec performance.routes.ts)
â˜ services-manager.routes.ts (fusionner avec services.routes.ts)
â˜ system-health.routes.ts (fusionner avec system.routes.ts)

UTILS REDONDANTS :
â˜ applicationLogger.ts (utilise logger.ts)
â˜ redisLogger.ts (utilise logger.ts)
â˜ redisManager.ts (utilise redis.service.ts)
â˜ crypto.ts (fusionner avec encryption.ts)
â˜ email.ts (doublon avec email.service.ts)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸ”„ RÃ‰ORGANISATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

MIDDLEWARES :
src/middlewares/
â”œâ”€â”€ auth/
â”‚   â”œâ”€â”€ auth.middleware.ts
â”‚   â”œâ”€â”€ adminAuth.middleware.ts
â”‚   â”œâ”€â”€ dualAuth.middleware.ts
â”‚   â””â”€â”€ tokenBlacklist.middleware.ts
â”œâ”€â”€ security/
â”‚   â”œâ”€â”€ csrf.middleware.ts
â”‚   â”œâ”€â”€ advancedSecurity.middleware.ts
â”‚   â”œâ”€â”€ oauth.security.middleware.ts
â”‚   â””â”€â”€ inputValidation.middleware.ts
â”œâ”€â”€ rate-limit/
â”‚   â”œâ”€â”€ rateLimiter.middleware.ts
â”‚   â”œâ”€â”€ advancedRateLimit.middleware.ts
â”‚   â””â”€â”€ clientRateLimit.middleware.ts
â”œâ”€â”€ proxy/
â”‚   â”œâ”€â”€ proxyMiddleware.ts
â”‚   â”œâ”€â”€ proxyAuth.ts
â”‚   â”œâ”€â”€ proxyCache.ts
â”‚   â”œâ”€â”€ proxyConfig.ts
â”‚   â”œâ”€â”€ proxyHeaders.ts
â”‚   â””â”€â”€ proxyRateLimit.ts
â”œâ”€â”€ monitoring/
â”‚   â”œâ”€â”€ metrics.middleware.ts
â”‚   â”œâ”€â”€ responseTime.middleware.ts
â”‚   â””â”€â”€ realLogging.middleware.ts
â””â”€â”€ core/
    â”œâ”€â”€ errorHandler.middleware.ts
    â”œâ”€â”€ validation.middleware.ts
    â”œâ”€â”€ authorization.middleware.ts
    â”œâ”€â”€ decryptId.middleware.ts
    â”œâ”€â”€ requestFilter.middleware.ts
    â”œâ”€â”€ swaggerAuth.middleware.ts
    â””â”€â”€ unauthorizedHandler.middleware.ts

ROUTES :
src/routes/
â”œâ”€â”€ auth/
â”‚   â”œâ”€â”€ auth.routes.ts (fusionnÃ©)
â”‚   â””â”€â”€ authorize.routes.ts
â”œâ”€â”€ admin/
â”‚   â”œâ”€â”€ users.routes.ts
â”‚   â”œâ”€â”€ roles.routes.ts
â”‚   â””â”€â”€ services.routes.ts
â”œâ”€â”€ sso/
â”‚   â”œâ”€â”€ sso.routes.ts
â”‚   â””â”€â”€ sso-sessions.routes.ts
â”œâ”€â”€ system/
â”‚   â”œâ”€â”€ system.routes.ts (fusionnÃ©)
â”‚   â””â”€â”€ monitoring.routes.ts (fusionnÃ©)
â”œâ”€â”€ proxy/
â”‚   â””â”€â”€ proxy.routes.ts
â”œâ”€â”€ account/
â”‚   â”œâ”€â”€ account-deletion.routes.ts
â”‚   â””â”€â”€ serviceUser.routes.ts
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ swagger.routes.ts
â”‚   â”œâ”€â”€ docs.routes.ts
â”‚   â””â”€â”€ documentation.routes.ts
â”œâ”€â”€ security/
â”‚   â””â”€â”€ csrf.routes.ts
â””â”€â”€ index.ts

SERVICES :
src/services/
â”œâ”€â”€ auth/
â”‚   â””â”€â”€ authorization.service.ts
â”œâ”€â”€ email/
â”‚   â””â”€â”€ email.service.ts
â”œâ”€â”€ monitoring/
â”‚   â”œâ”€â”€ monitoring.service.ts
â”‚   â””â”€â”€ logsGenerator.service.ts
â”œâ”€â”€ proxy/
â”‚   â”œâ”€â”€ proxy.service.ts
â”‚   â””â”€â”€ routingEngine.service.ts
â”œâ”€â”€ redis/
â”‚   â””â”€â”€ redis.service.ts
â”œâ”€â”€ security/
â”‚   â”œâ”€â”€ tokenBlacklist.service.ts
â”‚   â””â”€â”€ userEncryption.service.ts
â””â”€â”€ system/
    â””â”€â”€ serviceManager.service.ts

UTILS :
src/utils/
â”œâ”€â”€ errors/
â”‚   â””â”€â”€ AppError.ts
â”œâ”€â”€ logging/
â”‚   â””â”€â”€ logger.ts (fusionnÃ©)
â”œâ”€â”€ security/
â”‚   â”œâ”€â”€ encryption.ts (fusionnÃ©)
â”‚   â””â”€â”€ hmacSignature.ts
â”œâ”€â”€ system/
â”‚   â”œâ”€â”€ banner.ts
â”‚   â”œâ”€â”€ browserLauncher.ts
â”‚   â”œâ”€â”€ portManager.ts
â”‚   â”œâ”€â”€ performanceOptimizer.ts
â”‚   â””â”€â”€ secretsManager.ts
â””â”€â”€ index.ts (exports)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  âœ… ACTIONS Ã€ EFFECTUER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Supprimer les fichiers inutilisÃ©s
2. CrÃ©er la nouvelle structure de dossiers
3. DÃ©placer et fusionner les fichiers
4. Mettre Ã  jour les imports
5. Tester que tout fonctionne
6. Supprimer les anciens fichiers

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
